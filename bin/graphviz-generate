#!/bin/bash
# Reads the GraphViz files from graphs/*.dot coverts them to jpg with the `dot`
# tool and stores the output in assets/images/*.jpg if they don't exist.

for dot in graphs/*.dot; do
  filename=$(basename -- "$dot")
  source="${filename%.*}"
  dest="assets/images/graphs/${source}.jpg"


  if [ ! -f $dest ]; then
    set -x
    dot -Tjpg -o $dest $dot
    { set +x; } 2> /dev/null
  fi
done
